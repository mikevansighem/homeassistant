###############################################################################
# GENERAL
###############################################################################

# Configure a default setup of Home Assistant (frontend, api, etc)
default_config:

# Inclusions
group: !include groups.yaml
automation: !include automations.yaml
script: !include scripts.yaml
scene: !include scenes.yaml
binary_sensor: !include binary_sensor.yaml
climate: !include climate.yaml
alarm_control_panel: !include alarm_control_panel.yaml
media_player: !include media_player.yaml
utility_meter: !include utility_meter.yaml
sensor: !include sensor.yaml
recorder: !include recorder.yaml
shell_command: !include shell_command.yaml

# Enable themes
frontend:
  themes: !include_dir_merge_named themes

# Include customization file
homeassistant:
  customize: !include customize.yaml

# Limit login attempts
http:
  ip_ban_enabled: true
  login_attempts_threshold: 5

# Text to speech
tts:
  - platform: google_translate

###############################################################################
# INPUT SELECT
###############################################################################

input_select:

  # Manual override for house state
  house_state_override:
    name: House state override
    options:
      - auto
      - home
      - away
      - night
      - holiday
    initial: auto
    icon: mdi:home

  # Manual override for climate state
  climate_period_override:
    name: Climate period override
    options:
      - auto
      - morning
      - day
      - evening
      - night
    initial: auto
    icon: mdi:home-thermometer

###############################################################################
# INPUT NUMBER
###############################################################################

input_number:

  # Volume for alarm
  alarm_volume:
    name: Alarm volume
    icon: mdi:volume-high
    initial: 1
    min: 0
    max: 1
    step: 0.1
    mode: slider

  # Volume for pending and arming beep
  aux_volume:
    name: Aux volume
    icon: mdi:volume-medium
    initial: 0.4
    min: 0
    max: 1
    step: 0.1
    mode: slider
    
  # Sprinkler base time
  back_sprinkler_base_time:
    name: Back sprinkler base time
    icon: mdi:clock
    initial: 2
    min: 0
    max: 10
    step: 1
    unit_of_measurement: "min"
    mode: box
    
  # Sprinkler base time
  front_sprinkler_base_time:
    name: Front sprinkler base time
    icon: mdi:clock
    initial: 2
    min: 0
    max: 10
    step: 1
    unit_of_measurement: "min"
    mode: box
    
  # Sprinkler manual run time
  back_sprinkler_time:
    name: Back sprinkler time
    icon: mdi:clock
    initial: 2
    min: 0
    max: 10
    step: 0.1
    unit_of_measurement: "min"
    mode: box
    
  # Sprinkler manual run time
  front_sprinkler_time:
    name: Front sprinkler time
    icon: mdi:clock
    initial: 2
    min: 0
    max: 10
    step: 0.1
    unit_of_measurement: "min"
    mode: box
    
  # If rain is above this number no watering
  rain_threshold:
    name: Rain threshold
    icon: mdi:weather-pouring
    initial: 2
    min: 0
    max: 20
    step: 1
    unit_of_measurement: "mm"
    mode: box

  # Avarage humidity
  base_humidity:
    name: Base humidity
    icon: mdi:water-percent
    initial: 75
    min: 0
    max: 100
    step: 1
    unit_of_measurement: "%"
    mode: box

  # Avarage temperature
  base_temperature:
    name: Base temperature
    icon: mdi:thermometer
    initial: 75
    min: 0
    max: 100
    step: 1
    unit_of_measurement: "°C"
    mode: box
    
  # Cutoff sprinkler entirely
  watering_cutoff:
    name: Watering cutoff
    icon: mdi:sprinkler-variant
    initial: 75
    min: 0
    max: 100
    step: 1
    unit_of_measurement: "%"
    mode: box
    
  # Temperature for hot water
  hot_water_temperature:
    name: Hot water temperature
    icon: mdi:water-pump
    initial: 60
    min: 45
    max: 85
    step: 1
    unit_of_measurement: "°C"
    mode: box
    
  # Night temperature
  night_temperature:
    name: Night temperature
    icon: mdi:thermometer
    initial: 15
    min: 0
    max: 30
    step: 0.5
    unit_of_measurement: "°C"
    mode: box
    
  # Day temperature
  day_temperature:
    name: Day temperature
    icon: mdi:thermometer
    initial: 16.5
    min: 0
    max: 30
    step: 0.5
    unit_of_measurement: "°C"
    mode: box
    
  # Evening temperature
  evening_temperature:
    name: Evening temperature
    icon: mdi:thermometer
    initial: 18.5
    min: 0
    max: 30
    step: 0.5
    unit_of_measurement: "°C"
    mode: box
    
  # Morning  temperature
  morning_temperature:
    name: Morning  temperature
    icon: mdi:thermometer
    initial: 18
    min: 0
    max: 30
    step: 0.5
    unit_of_measurement: "°C"
    mode: box

###############################################################################
# INPUT BOOLEAN
###############################################################################

input_boolean:

  quiet:
    name: Quiet
    icon: mdi:volume-off

  holiday:
    name: Holiday
    icon: mdi:beach

  first_down:
    name: First down
    icon: mdi:motion-sensor

###############################################################################
# LOGGER
###############################################################################

logger:
  default: debug
  logs:
    pychromecast.socket_client: fatal
    homeassistant.components.webhook: error
    
    filters:
    # Ignore messages from the alarm panel
      homeassistant.components.zha.core.channels.base:
        - ".*received command get_panel_status"
        - ".*Arming all IAS ACE zones"
        - ".*Disarming all IAS ACE zones"
      

###############################################################################
# ZIGBEE
###############################################################################

zha:
  zigpy_config:
    network:
      channel: 20

###############################################################################
# PRECENCE
###############################################################################

proximity:
  home_mike:
    zone: home
    devices:
      - device_tracker.sm_g960f
      - device_tracker.ping_phone_mike
    tolerance: 50
    unit_of_measurement: km
  home_anneloes:
    zone: home
    devices:
      - device_tracker.sm_a202f
      - device_tracker.ping_phone_anneloes
    tolerance: 50
    unit_of_measurement: km

# Presence based on ping
device_tracker:
  - platform: ping
    hosts:
      ping_phone_mike: 192.168.2.11
      ping_phone_anneloes: 192.168.2.27
